# 超级管理员账户设置说明

## 创建超级管理员账户

由于无法直接在数据库中创建认证用户，需要通过以下步骤手动创建超级管理员账户：

### 步骤 1: 注册账户

1. 访问应用的登录页面
2. 点击"注册"按钮
3. 使用以下信息注册：
   - 用户名：`zhouzhou123`
   - 邮箱：任意有效邮箱（例如：`zhouzhou123@example.com`）
   - 密码：设置一个强密码

### 步骤 2: 将账户设置为管理员

注册完成后，需要在数据库中将该账户的角色更新为管理员。

#### 方法 1: 使用辅助函数（推荐）

1. 登录 Supabase Dashboard
2. 进入 SQL Editor
3. 执行以下 SQL 命令：

```sql
-- 将用户名为 zhouzhou123 的账户设置为管理员
SELECT set_user_as_admin('zhouzhou123');
```

执行成功后会返回：`成功将用户 zhouzhou123 设置为管理员`

#### 方法 2: 直接更新数据库

1. 登录 Supabase Dashboard
2. 进入 SQL Editor
3. 执行以下 SQL 命令：

```sql
-- 将用户名为 zhouzhou123 的账户设置为管理员
UPDATE profiles 
SET role = 'admin'::user_role 
WHERE username = 'zhouzhou123';
```

### 步骤 3: 验证管理员权限

1. 退出当前账户（如果已登录）
2. 使用 `zhouzhou123` 账户重新登录
3. 登录后，首页右上角应该会显示"管理"按钮（盾牌图标）
4. 点击"管理"按钮，应该能够访问用户管理页面

## 管理员功能

超级管理员拥有以下权限：

1. **查看所有用户**：在管理页面查看所有注册用户的列表
2. **修改用户角色**：将普通用户提升为管理员，或将管理员降级为普通用户
3. **删除用户**：删除用户账户及其所有数据（不能删除自己的账户）
4. **访问管理页面**：通过首页右上角的"管理"按钮访问

## 快速设置其他管理员

如果需要将其他用户设置为管理员，可以：

1. 以管理员身份登录
2. 访问管理页面（点击首页右上角的"管理"按钮）
3. 在用户列表中找到目标用户
4. 使用角色下拉菜单将其角色更改为"管理员"

## 安全建议

1. 使用强密码保护管理员账户
2. 不要与他人分享管理员账户信息
3. 定期检查用户列表，删除不活跃或可疑账户
4. 谨慎授予其他用户管理员权限
5. 建议定期更改管理员密码

## 注意事项

- 管理员不能删除自己的账户
- 删除用户时，该用户的所有事件和进展记录也会被永久删除
- 角色更改会立即生效，用户无需重新登录
- 首次设置管理员后，可以通过管理页面管理其他用户的权限

## 故障排除

### 问题：注册后看不到"管理"按钮

**解决方案**：
1. 确认已在数据库中将用户角色设置为 `admin`
2. 退出登录后重新登录
3. 检查浏览器控制台是否有错误信息

### 问题：无法访问管理页面

**解决方案**：
1. 确认当前登录的账户是管理员账户
2. 检查数据库中 profiles 表，确认 role 字段为 `admin`
3. 清除浏览器缓存后重试

### 问题：找不到用户名为 zhouzhou123 的用户

**解决方案**：
1. 确认已完成注册步骤
2. 检查注册时使用的用户名是否正确
3. 在 Supabase Dashboard 的 profiles 表中查看是否存在该用户
